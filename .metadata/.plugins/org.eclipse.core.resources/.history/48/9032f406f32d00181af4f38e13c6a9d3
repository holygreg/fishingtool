package control;

import javax.swing.JOptionPane;

import persist.dao.impl.BaitDaoImpl;
import persist.dao.interfaces.BaitDaoInterface;
import persist.entities.Bait;
import util.BaitType;
import util.Color;
import view.CreateBaitPanelImpl;

public class CreateBaitController extends PanelController {

	private String name = null;

	private String brand = null;

	private String price = null;

	private String weight = null;

	private Color color = null;

	private String shop = null;

	private BaitType baitType = null;

	private final BaitDaoInterface baitDao = new BaitDaoImpl();

	@Override
	public void setActionListeners() {

		CreateBaitPanelImpl createBaitPanel = (CreateBaitPanelImpl) controlledPanel;

		createBaitPanel.setNameFieldActionListener(e -> name = createBaitPanel.getNameField().getText());

		createBaitPanel.setBrandFieldActionListener(e -> brand = createBaitPanel.getBrand_field().getText());

		createBaitPanel.setPriceFieldActionListener(e -> price = createBaitPanel.getPrice_field().getText());

		createBaitPanel.setWeightFieldActionListener(e -> weight = createBaitPanel.getWeightField().getText());

		createBaitPanel.setColorBoxActionListener(e -> color = (Color) createBaitPanel.getColorBox().getSelectedItem());

		createBaitPanel.setShopFieldActionListener(e -> shop = createBaitPanel.getShopField().getText());

		createBaitPanel
				.setBaitBoxActionListener(e -> baitType = (BaitType) createBaitPanel.getBaitBox().getSelectedItem());

		createBaitPanel.setCreateButtonActionListener(e -> {
			if (name == null)
				showMessage("Es muss ein Produktname angegeben werden!");
			else if (brand == null)
				showMessage("Es muss ein Markenname angegeben werden!");
			else if (price == null)
				showMessage("Es muss ein Preis angegeben werden!");
			else if (weight == null)
				showMessage("Es muss ein Gewicht angegeben werden!");
			else if (shop == null)
				showMessage("Es muss ein Gesch√§ft angegeben werden!");
			else {
				Bait bait = new Bait();

				bait.setName(name);
				bait.setBrand(brand);
				bait.setPrice(Float.valueOf(price));
				bait.setColor(color);
				bait.setShop(shop);
				bait.setWeight(Float.valueOf(weight));

				baitDao.persist(bait);
			}
		});
	}

}
